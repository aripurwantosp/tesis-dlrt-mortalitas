----------------------------------------------------------------------------------------------------------------------------------
      name:  log_5_vars_community_idhs17
       log:  D:\RESEARCH & WRITING\master thesis_child mortality\stata\log\5_vars_community_idhs17.log
  log type:  text
 opened on:  15 Dec 2021, 07:05:52

. 
. *set the date
. loc date = c(current_date)

. loc time = c(current_time)

. loc time_date = "`date'" + "_" + "`time'"

. loc tag "`dfn'.do Ari Prasojo `time_date'"

. 
. *direktori dataset
. *\dataset rumah tangga
. loc hhdata              "`dtadir'\2-vars-household-`idhs'.dta"

. 
. *\dataset individu perempuan
. loc irdata              "`dtadir'\3-vars-women-`idhs'.dta"

. 
. *\dataset disimpan sebagai (nama)
. loc savenm              "`dtadir'\5-vars-community-`idhs'.dta"

. 
. 
. 
. /*
> ================================================================================
> RUMAH TANGGA
> ================================================================================
> */
. 
. use "`hhdata'"
(Variabel level rumah tangga \ 15 Dec 2021_06:57:17)

. 
. /*
> ******************************************************************
> Variabel-variabel                                                                                       [done]
> ******************************************************************
>  */
. 
. *\denominator (banyaknya ruta)
. bysort psu: gen nhh = _N

. lab var nhh "Banyaknya rumah tangga"

. 
. *\% rumah tangga yang memiliki sumber air minum layak
. bysort psu: egen nimpdrinkwathh = sum(impdrinkwat)

.         gen phhimpdrinkwat = nimpdrinkwathh/nhh

.         lab var phhimpdrinkwat "% Rumah tangga dengan sumber air minum layak di komunitas"

. 
. *\% rumah tangga yang memiliki sanitasi layak
. bysort psu: egen nimpsanhh = sum(impsan)

.         gen phhimpsan = nimpsanhh/nhh

.         lab var phhimpsan "% Rumah tangga dengan sanitasi layak di komunitas"

. 
. *\% rumah tangga yang memiliki bahan bakar memasak aman/polusi rendah
. bysort psu: egen nimpcookflhh = sum(cookfldr)

.         gen phhimpcookfl = nimpcookflhh/nhh

.         lab var phhimpcookfl "% Rumah tangga dengan bahan bakar memasak aman di komunitas"

. 
. *\% rumah tangga yang terdeprivasi lingkungan
. bysort psu: egen ndephh = sum(depriv)

.         gen phhdep = ndephh/nhh

.         lab var phhdep "% Rumah tangga yang mengalami deprivasi lingkungan di komunitas"

. 
. 
. /*
> ******************************************************************
> Simpan                                                                                                          [done]
> ******************************************************************
> */
. 
. keep psu-reside phhimpdrinkwat phhimpsan phhimpcookfl ndephh

. duplicates drop psu, force

Duplicates in terms of psu

(45,993 observations deleted)

. summ(phhimpdrinkwat phhimpsan phhimpcookfl ndephh)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
phhimpdrin~t |      1,970    .8624132    .2206879          0          1
   phhimpsan |      1,970    .8175176     .206677          0          1
phhimpcookfl |      1,970    .6748734    .3459797          0          1
      ndephh |      1,970     14.8934    12.88429          0         50

. 
. quietly compress

. datasignature set, reset
  1970:8(81550):2670690324:1970311251       (data signature reset)

. lab data "Variabel komunitas ruta\ `time_date'"

. note: `idhs'-mortstudy-comm-hh.dta \ `tag'

. save "comm-hh.dta", replace
(file comm-hh.dta not found)
file comm-hh.dta saved

. 
. 
. 
. /*
> ================================================================================
> INDIVIDU/PEREMPUAN
> ================================================================================
> */
. 
. clear all

. use "`irdata'"
(Variabel perempuan \ 15 Dec 2021_06:59:09)

. 
. /*
> ******************************************************************
> Variabel-variabel                                                                                       [done]
> ******************************************************************
> */
. 
. *\denominator (banyaknya perempuan)
. gen psu = v001

. bysort psu: gen nw = _N

. 
. *\% perempuan berpendidikan menengah ke atas
. bysort psu: egen neduc2 = sum(meduc2cs)

.         gen pweduc2 = neduc2/nw

.         lab var pweduc2 "% Perempuan berpendidikan menengah ke atas di komunitas"

. 
. *\rata-rata lama sekolah perempuan
. *-v133 rata-rata lama sekolah perempuan
. bysort psu: egen mweducy = mean(meducy)

.         lab var mweducy "Rata-rata lama sekolah perempuan di komunitas"

. 
. *\% perempuan yang menganggap jarak ke fasilitas kesehatan sulit
. bysort psu: egen nwdisthfac = sum(mdisthfac)

.         gen pwdisthfac = nwdisthfac/nw

.         lab var pwdisthfac "% Perempuan yang menyatakan bermasalah menjangkau jarak faskes"

. 
. *\kuintil
. xtile qpwdisthfac = pwdisthfac, nq(5)

.         lab var qpwdisthfac "Masalah aksesibilitas ke faskes"

.         lab def qpwdisthfac 1 "Kuintil 1"                                                               ///
>                                                 2 "Kuintil 2"                                                           ///
>                                                 3 "Kuintil 3"                                                           ///
>                                                 4 "Kuintil 4"                                                           ///
>                                                 5 "Kuintil 5"

.         lab val qpwdisthfac qpwdisthfac

.         tab qpwdisthfac, m

    Masalah |
aksesibilit |
      as ke |
     faskes |      Freq.     Percent        Cum.
------------+-----------------------------------
  Kuintil 1 |     10,098       20.35       20.35
  Kuintil 2 |      9,896       19.94       40.29
  Kuintil 3 |      9,817       19.78       60.07
  Kuintil 4 |     10,080       20.31       80.38
  Kuintil 5 |      9,736       19.62      100.00
------------+-----------------------------------
      Total |     49,627      100.00

. 
. *\pwdisthfac kategori
. recode qpwdisthfac (1/2 = 0 "Rendah")                                                           ///
>                                    (3/4 = 1 "Sedang")                                                           ///
>                                    (5 = 2 "Tinggi"), gen(pwdisthfac3c)
(49627 differences between qpwdisthfac and pwdisthfac3c)

.         lab var pwdisthfac3c "Masalah aksesibilitas ke faskes"

. 
. /*
> ******************************************************************
> Simpan                                                                                                          [done]
> ******************************************************************
> */
. 
. keep psu pweduc2 mweducy pwdisthfac qpwdisthfac pwdisthfac3c

. duplicates drop psu, force

Duplicates in terms of psu

(47,657 observations deleted)

. summ(pweduc2 mweducy pwdisthfac)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     pweduc2 |      1,970    .7285662    .2035741          0          1
     mweducy |      1,970    9.892203    2.108038          1      15.32
  pwdisthfac |      1,970    .1157973    .1320865          0          1

. 
. quietly compress

. datasignature set, reset
  1970:6(100783):1177880995:2237719547       (data signature reset)

. lab data "Variabel komunitas perempuan\ `time_date'"

. note: `idhs'-mortstudy-comm-wmn.dta \ `tag'

. save "comm-wmn.dta", replace
(file comm-wmn.dta not found)
file comm-wmn.dta saved

. 
. 
. 
. /*
> ================================================================================
> FINALISASI
> ================================================================================
> */
. 
. merge 1:1 psu using "comm-hh.dta", keep(match) keepus() nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             1,970  
    -----------------------------------------

. 
. erase "comm-hh.dta"

. erase "comm-wmn.dta"

. 
. quietly compress

. datasignature set, reset
  1970:13(73847):3486689671:552726396       (data signature reset)

. lab data "Variabel komunitas \ `time_date'"

. note: `idhs'-mortstudy-community.dta \ `tag'

. save "`savenm'", replace
(file dta\5-vars-community-idhs17.dta not found)
file dta\5-vars-community-idhs17.dta saved

. 
end of do-file

. do "D:\RESEARCH & WRITING\master thesis_child mortality\stata\do\6-merge.do"

. /*
> ================================================================================
> ********************************************************************************
> PROJECT:
> PENELITIAN TESIS
> DEPRIVASI LINGKUNGAN RUMAH TANGGA DAN KEMATIAN BAYI DAN ANAK DI INDONESIA
> 
> SYNTAX:
> 6-MENGGABUNGKAN DATASET (1-5)
> 
> PENULIS:
> ARI PURWANTO SARWO PRASOJO (2006500321)
> MAGISTER EKONOMI KEPENDUDUKAN DAN KETENAGAKERJAAN
> FEB, UNIVERSITAS INDONESIA
> 2021
> ********************************************************************************
> ================================================================================
> */
. 
. 
. 
. /*
> ================================================================================
> PENYIAPAN
> ================================================================================
> */
. 
. cls

. log close _all
      name:  log_5_vars_community_idhs17
       log:  D:\RESEARCH & WRITING\master thesis_child mortality\stata\log\5_vars_community_idhs17.log
  log type:  text
 closed on:  15 Dec 2021, 07:08:57
----------------------------------------------------------------------------------------------------------------------------------
